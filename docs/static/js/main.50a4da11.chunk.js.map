{"version":3,"sources":["noteValues.js","Metronome.jsx","App.jsx","index.jsx"],"names":["noteValues","C0","D0","E0","F0","G0","A0","B0","C1","D1","E1","F1","G1","A1","B1","C2","D2","E2","F2","G2","A2","B2","C3","D3","E3","F3","G3","A3","B3","C4","D4","E4","F4","G4","A4","B4","C5","D5","E5","F5","G5","A5","B5","C6","D6","E6","F6","G6","A6","B6","C7","D7","E7","F7","G7","A7","B7","C8","to","ac","AudioContext","lastNote","Metronome","useState","bpm","setBpm","dur","setDur","type","setType","run","setRun","step","noteDurationToMs","lookAhead","timer","currentTime","nextNote","time","osc","createOscillator","connect","destination","start","stop","scheduleNote","useEffect","clearInterval","setInterval","inputMode","onChange","e","value","target","match","placeholder","onClick","resume","waveTypes","context","window","webkitAudioContext","g","o","App","note","setNote","running","setRunning","createGain","frequency","onSelect","setter","onStop","gain","exponentialRampToValueAtTime","setTimeout","Object","keys","map","n","w","disabled","decay","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.50a4da11.chunk.js","sourcesContent":["/**\n * copied directly from\n * https://gist.github.com/marcgg/94e97def0e8694f906443ed5262e9cbb, which is\n * possibly sourced from https://pages.mtu.edu/~suits/notefreqs.html\n */\nconst noteValues = {\n  C0: 16.35,\n  \"C♯0\": 17.32,\n  \"D♭0\": 17.32,\n  D0: 18.35,\n  \"D♯0\": 19.45,\n  \"E♭0\": 19.45,\n  E0: 20.6,\n  F0: 21.83,\n  \"F♯0\": 23.12,\n  \"G♭0\": 23.12,\n  G0: 24.5,\n  \"G♯0\": 25.96,\n  \"A♭0\": 25.96,\n  A0: 27.5,\n  \"A♯0\": 29.14,\n  \"B♭0\": 29.14,\n  B0: 30.87,\n  C1: 32.7,\n  \"C♯1\": 34.65,\n  \"D♭1\": 34.65,\n  D1: 36.71,\n  \"D♯1\": 38.89,\n  \"E♭1\": 38.89,\n  E1: 41.2,\n  F1: 43.65,\n  \"F♯1\": 46.25,\n  \"G♭1\": 46.25,\n  G1: 49.0,\n  \"G♯1\": 51.91,\n  \"A♭1\": 51.91,\n  A1: 55.0,\n  \"A♯1\": 58.27,\n  \"B♭1\": 58.27,\n  B1: 61.74,\n  C2: 65.41,\n  \"C♯2\": 69.3,\n  \"D♭2\": 69.3,\n  D2: 73.42,\n  \"D♯2\": 77.78,\n  \"E♭2\": 77.78,\n  E2: 82.41,\n  F2: 87.31,\n  \"F♯2\": 92.5,\n  \"G♭2\": 92.5,\n  G2: 98.0,\n  \"G♯2\": 103.83,\n  \"A♭2\": 103.83,\n  A2: 110.0,\n  \"A♯2\": 116.54,\n  \"B♭2\": 116.54,\n  B2: 123.47,\n  C3: 130.81,\n  \"C♯3\": 138.59,\n  \"D♭3\": 138.59,\n  D3: 146.83,\n  \"D♯3\": 155.56,\n  \"E♭3\": 155.56,\n  E3: 164.81,\n  F3: 174.61,\n  \"F♯3\": 185.0,\n  \"G♭3\": 185.0,\n  G3: 196.0,\n  \"G♯3\": 207.65,\n  \"A♭3\": 207.65,\n  A3: 220.0,\n  \"A♯3\": 233.08,\n  \"B♭3\": 233.08,\n  B3: 246.94,\n  C4: 261.63,\n  \"C♯4\": 277.18,\n  \"D♭4\": 277.18,\n  D4: 293.66,\n  \"D♯4\": 311.13,\n  \"E♭4\": 311.13,\n  E4: 329.63,\n  F4: 349.23,\n  \"F♯4\": 369.99,\n  \"G♭4\": 369.99,\n  G4: 392.0,\n  \"G♯4\": 415.3,\n  \"A♭4\": 415.3,\n  A4: 440.0,\n  \"A♯4\": 466.16,\n  \"B♭4\": 466.16,\n  B4: 493.88,\n  C5: 523.25,\n  \"C♯5\": 554.37,\n  \"D♭5\": 554.37,\n  D5: 587.33,\n  \"D♯5\": 622.25,\n  \"E♭5\": 622.25,\n  E5: 659.26,\n  F5: 698.46,\n  \"F♯5\": 739.99,\n  \"G♭5\": 739.99,\n  G5: 783.99,\n  \"G♯5\": 830.61,\n  \"A♭5\": 830.61,\n  A5: 880.0,\n  \"A♯5\": 932.33,\n  \"B♭5\": 932.33,\n  B5: 987.77,\n  C6: 1046.5,\n  \"C♯6\": 1108.73,\n  \"D♭6\": 1108.73,\n  D6: 1174.66,\n  \"D♯6\": 1244.51,\n  \"E♭6\": 1244.51,\n  E6: 1318.51,\n  F6: 1396.91,\n  \"F♯6\": 1479.98,\n  \"G♭6\": 1479.98,\n  G6: 1567.98,\n  \"G♯6\": 1661.22,\n  \"A♭6\": 1661.22,\n  A6: 1760.0,\n  \"A♯6\": 1864.66,\n  \"B♭6\": 1864.66,\n  B6: 1975.53,\n  C7: 2093.0,\n  \"C♯7\": 2217.46,\n  \"D♭7\": 2217.46,\n  D7: 2349.32,\n  \"D♯7\": 2489.02,\n  \"E♭7\": 2489.02,\n  E7: 2637.02,\n  F7: 2793.83,\n  \"F♯7\": 2959.96,\n  \"G♭7\": 2959.96,\n  G7: 3135.96,\n  \"G♯7\": 3322.44,\n  \"A♭7\": 3322.44,\n  A7: 3520.0,\n  \"A♯7\": 3729.31,\n  \"B♭7\": 3729.31,\n  B7: 3951.07,\n  C8: 4186.01,\n};\n\nexport default noteValues;\n","import { useState, useEffect } from \"react\";\n\nfunction noteDurationToMs(bpm, dur, type) {\n  return (60000 * 4 * dur * type) / bpm;\n}\n\nfunction scheduleNote(ac, time, dur) {\n  var osc = ac.createOscillator();\n  osc.connect(ac.destination);\n\n  osc.start(time);\n  osc.stop(time + dur);\n}\n\nconst ac = new AudioContext();\nlet to,\n  lastNote = 0;\n\nconst Metronome = () => {\n  const [bpm, setBpm] = useState(100);\n  const [dur, setDur] = useState(1);\n  const [type, setType] = useState(1);\n  const [run, setRun] = useState(false);\n\n  const handleChangeBPM = (e) => {\n    const value = e.target.value;\n    if (value.match(/^\\d*$/)) setBpm(value);\n  };\n\n  const handleChangeDur = (e) => {\n    setDur(e.target.value);\n  };\n\n  const handleChangeType = (e) => {\n    setType(e.target.value);\n  };\n\n  const step = noteDurationToMs(bpm, dur, type) / 1000;\n  const lookAhead = step / 2;\n\n  const timer = () => {\n    const diff = ac.currentTime - lastNote;\n    if (diff >= lookAhead) {\n      const nextNote = lastNote + step;\n      scheduleNote(ac, nextNote, 0.025);\n      lastNote = nextNote;\n    }\n  };\n\n  const start = () => {\n    ac.resume();\n    setRun(true);\n  };\n\n  const stop = () => {\n    clearInterval(to);\n    setRun(false);\n  };\n\n  const toggle = () => {\n    run ? stop() : start();\n  };\n\n  useEffect(() => {\n    if (run) {\n      clearInterval(to);\n      to = setInterval(timer, step / 4);\n    }\n  });\n\n  return (\n    <>\n      <h2>Metronome</h2>\n      <input\n        aria-label=\"bpm\"\n        inputMode=\"numeric\"\n        onChange={handleChangeBPM}\n        value={bpm}\n        placeholder=\"BPM\"\n      />\n      <select aria-label=\"duration\" onChange={handleChangeDur} value={dur}>\n        <option value={1}>Whole</option>\n        <option value={1 / 2}>Half</option>\n        <option value={1 / 4}>Quarter</option>\n        <option value={1 / 8}>Eigth </option>\n        <option value={1 / 16}>Sixteenth</option>\n        <option value={1 / 32}>Thirtysecond</option>\n      </select>\n      <select aria-label=\"note type\" onChange={handleChangeType} value={type}>\n        <option value={1}>Regular</option>\n        <option value={3 / 2}>Dotted</option>\n        <option value={2 / 3}>Triplet</option>\n      </select>\n      <button onClick={toggle}>{run ? \"stop\" : \"start\"}</button>\n    </>\n  );\n};\n\nexport default Metronome;\n","import { useEffect, useState } from \"react\";\nimport \"./styles.css\";\nimport noteValues from \"./noteValues\";\nimport Metronome from \"./Metronome\";\n\nconst waveTypes = [\"sine\", \"square\", \"triangle\", \"sawtooth\"];\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\nconst context = new AudioContext();\n\nlet g = null;\nlet o = null;\n\nexport default function App() {\n  const [note, setNote] = useState(\"440\");\n  const [type, setType] = useState(waveTypes[0]);\n  const [running, setRunning] = useState(false);\n\n  const start = () => {\n    o = context.createOscillator();\n    g = context.createGain();\n    o.type = type;\n    o.connect(g);\n    o.frequency.value = note;\n    g.connect(context.destination);\n    o.start(0);\n  };\n\n  const stop = () => {\n    g.gain.exponentialRampToValueAtTime(0.00001, context.currentTime + 0.04);\n  };\n\n  const onSelect = (setter) => (e) => {\n    setter(e.target.value);\n  };\n\n  const onStart = () => {\n    start();\n    setRunning(true);\n  };\n\n  const onStop = () => {\n    stop();\n    setRunning(false);\n    setTimeout(() => {\n      o.stop();\n    }, 40);\n  };\n\n  const onBoing = () => {\n    const decay = 1500;\n    setRunning(true);\n    start();\n    g.gain.exponentialRampToValueAtTime(\n      0.00001,\n      context.currentTime + decay / 1000\n    );\n    setTimeout(() => {\n      setRunning(false);\n      onStop();\n    }, decay);\n  };\n\n  useEffect(() => {\n    if (o?.type) o.type = type;\n    if (o?.frequency) o.frequency.value = note;\n  }, [note, type]);\n\n  return (\n    <>\n      <h1>tuning fork robot</h1>\n      <h2>Tuning fork</h2>\n      <div>\n        <select aria-label=\"Note\" onChange={onSelect(setNote)} value={note}>\n          {Object.keys(noteValues).map((n) => (\n            <option key={n} value={noteValues[n]}>\n              {n} ({noteValues[n]}Hz)\n            </option>\n          ))}\n        </select>\n        <select\n          aria-label=\"Wave type\"\n          value={type}\n          onChange={onSelect(setType)}\n        >\n          {waveTypes.map((w) => (\n            <option value={w} key={w}>\n              {w}\n            </option>\n          ))}\n        </select>\n      </div>\n      <div>\n        <button disabled={running} onClick={onBoing}>\n          boing\n        </button>\n        <button disabled={running} onClick={onStart}>\n          start\n        </button>\n        <button disabled={!running} onClick={onStop}>\n          stop\n        </button>\n      </div>\n      <Metronome />\n    </>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}